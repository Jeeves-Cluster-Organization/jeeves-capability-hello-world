[pytest]
pythonpath = .
asyncio_mode = auto
testpaths =
    tests
    jeeves_avionics/tests
    jeeves_control_tower/tests
    jeeves_memory_module/tests
    jeeves_mission_system/tests
    jeeves_protocols/tests
    jeeves-capability-code-analyser/tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = -v --tb=short --import-mode=importlib -m "not full_flow and not requires_postgres and not requires_ml"
markers =
    unit: Unit tests (fast, no external dependencies)
    integration: Integration tests (may require database, filesystem)
    acceptance: End-to-end acceptance tests (full system)
    llm: Tests requiring LLM (CI-safe, skippable)
    slow: Slow-running tests (skip for quick runs)
    websocket: WebSocket tests (may hang in CI, run locally)
    ci_safe: Tests safe to run in CI environment
    full_flow: Full conversation flow (runs all scenarios sequentially, excluded by default)
    e2e: End-to-end tests requiring full stack
    requires_llamaserver: Tests requiring real LLM server
    requires_postgres: Tests requiring PostgreSQL database
    requires_docker: Tests requiring Docker containers
    requires_ml: Tests requiring ML/AI dependencies
    heavy: Resource-intensive tests
    contract: Constitutional contract compliance tests
    snapshot: Snapshot/baseline comparison tests
    regression: Regression tests
    deployment: Deployment infrastructure tests
    ui_ux: UI/UX and API format tests
